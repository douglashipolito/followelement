/*! followelement 22-10-2015 */
!function(a,b){"use strict";function c(a,b){var e=this;if(!(e instanceof c)){var g=Object.create(c.prototype);return g.constructor.apply(g,arguments),g}w.push(e),e.instanceIndex=w.length-1,e.selector=a,e.element=[],e._debug=!1,e.currentVisibility="unknown",e.events={appear:{fn:null,count:0,action:"appeared"},disappear:{fn:null,count:0,action:"disappeared"},insert:{fn:null,count:0,action:"inserted"},remove:{fn:null,count:0,action:"removed"}},e.observer=f.call(e,a),b&&"function"==typeof b&&e.observer.observe("appear",b),"[object Object]"===Object.prototype.toString.call(b)&&(b.debug&&(e._debug=b.debug),b.context&&d.call(e,b.context),x.forEach.call(Object.keys(e.events),function(a){"function"==typeof b[a]&&e.observer.observe(a,b[a])}))}function d(a,b,c){var d=this;if(!a&&!d.context)throw new Error('You must define the "context" param');return"undefined"!=typeof a&&"undefined"!=typeof b&&c&&(d.context=a),a&&1!==a.nodeType&&(a=x.find(a)),!d.context&&a&&(d.context=a),d.context}function e(){var a=this,b=x.findAll("style."+r.call(a,a.selector));a.observer._MutationObserverInstance&&a.observer._MutationObserverInstance.disconnect(),x.forEach.call(b,function(a){a.parentElement.removeChild(a)}),a.observer.disconnected=!0}function f(a){var b,c=this;return b={appear:function(){l.call(this,a)},disappear:function(){n.call(c)},insert:function(a){a=d.call(c,a,"insert"),h.call(c,a)},remove:function(a){a=d.call(c,a,"remove"),m.call(c,a)}},{paused:!1,observe:function(a,d,e){c.events[a]&&(c.events[a].fn=d,b[a]&&b[a].call(c,e))}}}function g(a,b){var c,d=this;return d.observer.paused?!1:x.matches.call(a,d.selector)&&(c=d.events[b],"function"==typeof c.fn)?(a.__followElement||(d.element.push(a),a.__followElement=!0),c.fn.call(d,a),c.count++,d.currentVisibility=b,d._debug&&console.log(t(this.selector,b,"this element has "+c.action)),!0):!1}function h(a){var b=this,c=x.findAll(this.selector);x.forEach.call(c,function(a){g.apply(b,[a,"insert"])}),k()?b.observer._MutationObserverInstance=i.call(b,a):b.observer._MutationObserverInstance=j.call(b,a)}function i(a){var b,c=this;return b=new v(function(a){a.forEach(function(a){x.forEach.call(a.addedNodes,function(a){1===a.nodeType&&g.apply(c,[a,"insert"])}),x.forEach.call(a.removedNodes,function(a){1===a.nodeType&&c.observer._checkRemove&&g.apply(c,[a,"remove"])})})}),b.observe(a,{childList:!0}),b}function j(a){var b=this,c=function(a){var c=a.target;g.apply(b,[c,"insert"])},d=function(a){var c=a.target;b.observer._checkRemove&&g.apply(b,[c,"remove"])};return b.observer._listeningDOMNodeInserted||(a.addEventListener("DOMNodeInserted",c),b.observer._listeningDOMNodeInserted=!0),b.observer._listeningDOMNodeRemoved||(a.addEventListener("DOMNodeRemoved",d),b.observer._listeningDOMNodeRemoved=!0),{disconnect:function(){a.removeEventListener("DOMNodeInserted",c,!1),a.removeEventListener("DOMNodeRemoved",d,!1)}}}function k(){var b=!!v;return/(iPhone|iPad|iPod)\sOS\s6/.test(a.navigator.userAgent)&&(b=!1),b}function l(a){var b=["animationstart","webkitAnimationStart","oanimationstart","MSAnimationStart"],c={keyframes:q(),selector:a,stylesClass:r.call(this,a),styles:s(a)},d=x.find("head"),e=function(a,b){var c=document.createElement(a);return b&&(b.className&&(c.className+=" "+b.className),b.content&&(c.innerText=b.content)),c};x.findAll("style.domnodeappear-keyframes").length||d.appendChild(e("style",{className:"domnodeappear-keyframes",content:c.keyframes})),x.findAll("style."+c.stylesClass).length||d.appendChild(e("style",{className:c.stylesClass,content:c.styles})),u||(x.forEach.call(b,function(a){document.addEventListener(a,function(a){var b=a.target;"elementAppeared"===a.animationName&&x.forEach.call(w,function(a){p(b)||g.apply(a,[b,"appear"]),x.matches.call(b,a.selector)&&a.observer._checkDisappear&&a.events.appear.count&&o.call(a,b)})},!1)}),u=!0)}function m(){var a=this;a.observer._checkRemove=!0}function n(){var a=this;a.observer._checkDisappear=!0}function o(a){var b,c=this,d=160;b=setTimeout(function e(){return p(a)?(clearTimeout(b),void g.apply(c,[a,"disappear"])):void setTimeout(e,d)},d)}function p(a){return null!==a&&0===a.offsetWidth&&0===a.offsetHeight||null===a.offsetParent}function q(){var a=" elementAppeared { from { outline: 1px solid transparent; }  to { outline: 0px solid transparent; } }",b="";return x.forEach.call(["@keyframes","@-moz-keyframes","@-webkit-keyframes","@-ms-keyframes","@-o-keyframes"],function(c){b+=c+a+" "}),b}function r(a){return a.replace(".","")+"-animation-"+this.instanceIndex}function s(a){return a+" { animation-name: elementAppeared;-webkit-animation-name: elementAppeared;animation-duration: 0.001s;-webkit-animation-duration: 0.001s; }"}function t(a,b,c){return"##VisibilityObserver##\n\nSelector = "+a+"\nAction = "+b+" \n\nMessage = "+c}var u,v=a.MutationObserver||a.WebKitMutationObserver||a.MozMutationObserver,w=[],x={find:function(a){return document.querySelector(a)},findAll:function(a){return document.querySelectorAll(a)},forEach:Array.prototype.forEach,matches:function(a){var b=Element.prototype,c=b.matches||b.matchesSelector||b.mozMatchesSelector||b.msMatchesSelector||b.oMatchesSelector||b.webkitMatchesSelector||function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]};return c.call(this,a)}};c.prototype={constructor:c,connect:function(a,b){return this.events[a]?(this.observer.observe(a,b),this):!1},disconnect:function(){return e.call(this),this},insert:function(a,b){return this.observer.observe("insert",a,b),this},remove:function(a,b){return this.observer.observe("remove",a,b),this},appear:function(a){return this.observer.observe("appear",a),this},disappear:function(a){return this.observer.observe("disappear",a),this},pause:function(){return this.observer.paused=!0,this},resume:function(){return this.observer.paused=!1,this},debug:function(){return this._debug=!this._debug,this},setContext:function(a,b){return d.call(this,a,b,!0),this}},c.version="0.0.0",a.followElement=c}(this);